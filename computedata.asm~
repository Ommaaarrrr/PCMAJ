MSB DATA 60
IS_FW BIT 1
DUTY_CYCLE_HI DATA 2
DUTY_CYCLE_LO DATA 3

ORG 0
LJMP MAIN

ORG 00ABH
MAIN:
	MOV R5, #4
	LOOP1:
		MOV R0, #MSB
		MOV A, @R0
		RLC A
		DEC R0
		ADD A, @R0
		DJNZ R5, LOOP1
	MOV R5, A
	
	CJNE R5, #00001111b, $+3

	CLR IS_FW
	JNC BW
	SETB IS_FW
	BW:

	MOV DUTY_CYCLE_HI, #0FFh
	MOV DUTY_CYCLE_LO, #0FFh
DIV_TIMER:	
	CLR C
	MOV A, DUTY_CYCLE_LO
	SUBB A, #41h
	MOV DUTY_CYCLE_LO, A
	MOV A, DUTY_CYCLE_HI
	SUBB A, #08h
	DJNZ R5, DIV_TIMER

	SJMP $

END